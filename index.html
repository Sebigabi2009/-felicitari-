<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Foc de artificii - La mulți ani 2026</title>
<style>
    body {
        margin: 0;
        background: black;
        overflow: hidden;
    }
    canvas {
        display: block;
    }
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

function resizeCanvas(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resizeCanvas();

window.addEventListener('resize', () => {
    resizeCanvas();
    particles = [];
    lettersFormed = false;
});

class Particle {
    constructor(x, y, color, target = null){
        this.x = x;
        this.y = y;
        this.color = color;
        this.vx = 0;
        this.vy = 0;
        this.alpha = 1;
        this.target = target;
    }
    update(){
        if(this.target){
            const dx = this.target.x - this.x;
            const dy = this.target.y - this.y;
            this.vx = dx * 0.05;
            this.vy = dy * 0.05;
            this.x += this.vx;
            this.y += this.vy;
        } else {
            this.vy += 0.05;
            this.vx *= 0.98;
            this.vy *= 0.98;
            this.x += this.vx;
            this.y += this.vy;
            this.alpha -= 0.01;
        }
    }
    draw(){
        ctx.globalAlpha = this.alpha;
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, 2.5, 0, Math.PI * 2);
        ctx.fill();
        ctx.globalAlpha = 1;
    }
}

class Rocket {
    constructor(){
        this.x = Math.random() * canvas.width;
        this.y = canvas.height;
        this.vy = - (Math.random() * 6 + 6);
        this.color = `hsl(${Math.random() * 360},100%,50%)`;
        this.exploded = false;
    }
    update(){
        this.y += this.vy;
        this.vy += 0.15;
        if(this.vy >= 0){
            this.explode();
        }
    }
    explode(){
        for(let i = 0; i < 40; i++){
            const angle = Math.random() * Math.PI * 2;
            const speed = Math.random() * 3 + 2;
            const p = new Particle(this.x, this.y, this.color);
            p.vx = Math.cos(angle) * speed;
            p.vy = Math.sin(angle) * speed;
            particles.push(p);
        }
        this.exploded = true;
    }
    draw(){
        ctx.fillStyle = this.color;
        ctx.fillRect(this.x, this.y, 2, 10);
    }
}

let particles = [];
let rockets = [];
let lettersFormed = false;

function createTextParticles(text, offsetY){
    const tempCanvas = document.createElement('canvas');
    const tCtx = tempCanvas.getContext('2d');
    tempCanvas.width = canvas.width;
    tempCanvas.height = canvas.height;

    const fontSize = Math.min(canvas.width / 10, 90);
    tCtx.font = `bold ${fontSize}px Arial, sans-serif`;
    tCtx.fillStyle = 'white';
    tCtx.textAlign = 'center';
    tCtx.textBaseline = 'middle';
    tCtx.fillText(text, canvas.width / 2, canvas.height / 2 + offsetY);

    const imageData = tCtx.getImageData(0, 0, canvas.width, canvas.height).data;
    const targets = [];

    const step = window.innerWidth < 768 ? 6 : 4;
    for(let y = 0; y < canvas.height; y += step){
        for(let x = 0; x < canvas.width; x += step){
            const index = (y * canvas.width + x) * 4;
            if(imageData[index + 3] > 150){
                targets.push({ x, y });
            }
        }
    }
    return targets;
}

const lines = ['LA MULȚI ANI 2026', 'VĂ UREAZĂ FAMILIA NICOLAE'];
let textTargets = [];
lines.forEach((line, i) => {
    textTargets = textTargets.concat(createTextParticles(line, i * 120 - 60));
});

function animate(){
    ctx.fillStyle = 'rgba(0,0,0,0.25)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    rockets.forEach((r, i) => {
        r.update();
        r.draw();
        if(r.exploded) rockets.splice(i, 1);
    });

    particles.forEach((p, i) => {
        p.update();
        p.draw();
        if(p.alpha <= 0) particles.splice(i, 1);
    });

    if(!lettersFormed){
        textTargets.forEach((t, i) => {
            const color = i % 2 === 0 ? '#ff0000' : '#ffff00';
            particles.push(new Particle(Math.random() * canvas.width, canvas.height, color, t));
        });
        lettersFormed = true;
    }

    requestAnimationFrame(animate);
}

animate();

const rocketsPerWave = window.innerWidth < 768 ? 1 : 3;
setInterval(() => {
    for(let i = 0; i < rocketsPerWave; i++){
        rockets.push(new Rocket());
    }
}, 500);
</script>

</body>
</html>
